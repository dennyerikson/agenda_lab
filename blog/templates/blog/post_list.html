{% extends 'blog/base.html' %}
{% load staticfiles %}
{% load static %}
{% load poll_extras %}

<head>
    <!-- float menu button -->
    <link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="collapzion.min.css">
    <script src="jquery.min.js"></script>
    <script src="collapzion.min.js"></script>

</head>

{% block content %}
    <body>

        <!-- Cabeçalho -->
        <div class="jumbotron jumbotron-fluid">
            <div class="logo">
                <img class="logo" src="{% static "blog/img/logo.png" %}" width="50">
            </div><!-- Fim Logo -->

            <div class="cabecalho">
                <h1>Agenda FAT</h1>
                <h5>Agendamento dos Laboratórios de Informática</h5>
                <p>{{ msg }}</p> 
                <!-- <p>{{ post }}</p>  -->
                
            </div>
            <div class="panel-group">
                <div class="panel">
                      
                    <div id="collapse" class="collapse">                                                
                        <div class="panel-body">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a>Pesquisa entre um intervalo de datas</a>
                                </h4>
                            </div>
                            
                            <!-- <input class="iconInput" type="text" id="sarch_init" placeholder="__/__/__"/>
                           
                            <input class="iconInput" type="text" id="search_final" placeholder="__/__/__"> -->

                            <form id="search_form" class="form-inline" method="GET" action="">
                                <div class="iconInput">
                                    <i class="glyphicon glyphicon-calendar"></i>
                                    <input type="text" name="qi" class="form-control" placeholder="__/__/__" />                                
                                </div>

                                <div class="iconInput">
                                    <i class="glyphicon glyphicon-calendar"></i>
                                    <input type="text" name="qf" class="form-control" placeholder="__/__/__" />                                
                                </div>

                                <input type="text" name="qc" placeholder="Curso">
<!-- 
                                <input type="text" name="ql" placeholder="Lab">

                                <input type="text" name="qu" placeholder="Unidade">

                                <input type="text" name="qp" placeholder="Período"> -->

                                <input type="submit" value="Search">
                                    <!-- <span class="glyphicon glyphicon-search"></span> -->
                                
                            </form>                            
                        </div>
                        
                        <a id="btn-up" data-toggle="collapse" data-target="#collapse" href="#">
                            <span class="glyphicon glyphicon-menu-up"></span>
                        </a>

                    </div>
                </div>
            </div>
<!-- 
            <div class="menu">
                <ul>
                    <li><a href="#" data-toggle="modal" data-target="#myModal" >Agendar</a></li>
                    <li><a href="#">Sobre</a></li>
                    <li><a href="\">Home</a></li>
                </ul>
            </div> -->

            <!-- <div class="btn_novo">
                <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Agendar</button>
            </div> -->
            <!--Fim btn-->
            

            <!-- <a href="#" onclick="overlay()">Click para interagir!</a> -->

            
            
        </div><!--Fim Cabeçalho -->

        <!-- Float button -->
        <div id="div2" class="zoom">
            <a class="zoom-fab zoom-btn-large" id="zoomBtn">
                <img src="https://img.icons8.com/ios/50/ffffff/menu-filled.png" width="30"></a>
            <ul class="zoom-menu">
                
                <!-- <li><a class="zoom-fab zoom-btn-sm zoom-btn-doc scale-transition scale-out">2</a></li> -->
                <!--Sobre-->
                <li><a class="zoom-fab zoom-btn-sm zoom-btn-feedback scale-transition scale-out">
                        <img src="https://img.icons8.com/material-rounded/50/ffffff/about.png" width="26"></a></li>
                <!--Contato-->
                <li><a class="zoom-fab zoom-btn-sm zoom-btn-report scale-transition scale-out" data-toggle="collapse" data-target="#collapse">
                    <img src="https://img.icons8.com/metro/50/ffffff/contacts.png" width="26"></a></li>                
                <!--Laboratórios-->
                <li><a class="zoom-fab zoom-btn-sm zoom-btn-tangram scale-transition scale-out">
                        <img src="https://img.icons8.com/ios/50/ffffff/workstation-filled.png"width="26"></a></li>
                <!--Agendar-->
                <li><a href="#" data-toggle="modal" data-target="#myModal" class="zoom-fab zoom-btn-sm zoom-btn-person scale-transition scale-out">
                        <img src="https://img.icons8.com/ios/50/ffffff/plus-math-filled.png" width="30"></a></li>
            </ul>
            <!-- <div class="zoom-card scale-transition scale-out">
                <ul class="zoom-card-content">
                <li>Content 1</li>
                <li>Content 2</li>
                <li>Content 3</li>
                <li>Content 4</li>
                <li>Content 5</li>
                </ul>
            </div> -->
        </div>
        <script>
            $('#zoomBtn').click(function() {
            $('.zoom-btn-sm').toggleClass('scale-out');
            if (!$('.zoom-card').hasClass('scale-out')) {
                $('.zoom-card').toggleClass('scale-out');
            }
            });

            $('.zoom-btn-sm').click(function() {
            var btn = $(this);
            var card = $('.zoom-card');
            if ($('.zoom-card').hasClass('scale-out')) {
                $('.zoom-card').toggleClass('scale-out');
            }
            if (btn.hasClass('zoom-btn-person')) {
                // card.css('background-color', '#d32f2f');

            } else if (btn.hasClass('zoom-btn-doc')) {
                card.css('background-color', '#fbc02d');
            } else if (btn.hasClass('zoom-btn-tangram')) {
                card.css('background-color', '#388e3c');
            } else if (btn.hasClass('zoom-btn-report')) {
                card.css('background-color', '#1976d2');
            } else {
                card.css('background-color', '#7b1fa2');
            }
            });        
        </script>
        <!-- Float button -->

        <!-- Container dados do agendamento-->
        <div class="container">
            <div class="row">

                {% for posts in post %}
                <div class="col-sm-3">
                    <div class="detail-body">
                    {% if posts.unidade == "1" %}
                        <h3><a class="nounderline" href=" {% url 'post_detail' pk=posts.pk %} " >Laboratório {{posts.lab}} | <font color="tomato"><b>{{posts.unidade|display_unidade_tag}}</b></a></font></h3>
                    {% else %}
                        <h3><a class="nounderline" href=" {% url 'post_detail' pk=posts.pk %} " >Laboratório {{posts.lab}} | <font color="cornflowerblue"><b>{{posts.unidade|display_unidade_tag}}</b></a></font></h3>
                        <!-- <h3>Laboratório {{posts.lab}} | <font color="cornflowerblue" ><b>{{posts.unidade|display_unidade_tag}}</b></font></h3> -->
                    {% endif %}

                    {% display_curses_tag posts.course as courses %}
                    {% for course in courses %}
                        <p>Curso | {{ course }} {% if posts.period == "01" %}
                            <img  src="https://png.icons8.com/ios/50/666666/summer-filled.png" width="20">{%else%}
                            <img  src="https://png.icons8.com/ios-glyphs/50/666666/moon-symbol.png"width="20">{%endif%}
                        </p>
                    {% endfor %}

                    <p>Data | {{posts.create_date}}</p>

                    <!-- <img src="https://png.icons8.com/ios-glyphs/50/000000/moon-symbol.png"> -->
                    <!-- <img src="https://png.icons8.com/ios-glyphs/50/000000/sun.png"> -->

                    </div>   
                </div>
                {% endfor %}
                
            </div>
        </div><!-- Fim Container dados do agendamento-->
        
    
        <!--Modal para adicionar evento-->
        <div class="container">          
            
            <!-- Modal -->
            <div class="modal fade" id="myModal" role="dialog" data-backdrop="static"> <!--data-backdrop="static" trava modal-->
                <div class="modal-dialog">
                
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">                    
                    <h4 class="modal-title">Cadastrar agendamento</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">

                        <!-- <script type="text/javascript" src="/admin/jsi18n/"></script>
                        <script type="text/javascript" src="{% static 'admin/js/core.js' %}"></script>
                        <script type="text/javascript" src="{% static 'admin/js/admin/RelatedObjectLookups.js' %}"></script>
                        <script type="text/javascript" src="{% static 'admin/js/vendor/jquery/jquery.min.js' %}"></script>
                        <script type="text/javascript" src="{% static 'admin/js/jquery.init.js' %}"></script>
                        <script type="text/javascript" src="{% static 'admin/js/actions.min.js' %}"></script>
                        <script type="text/javascript" src="{% static 'admin/js/calendar.js' %}"></script>
                        <script type="text/javascript" src="{% static 'admin/js/admin/DateTimeShortcuts.js' %}"></script> -->

                        <!-- <script>
                         $('#AdminDateWidget').AdminDateWidget({
                            container:'#myModal',                            
                            });
                        </script> -->

                        <!--Form do agendamento-->
                        <div class="login-page">
                            <div class="form">

                                <form class="pure-form pure-form-aligned" method="POST">
                                    {% csrf_token %}

                                    <fieldset>
                                        {{ form.non_field_errors }}

                                        {% for field in form %}
                                            <div class="pure-control-group">
                                                <div class="custon-select">
                                                    {{ field.label_tag}}
                                                    {{field}}
                                                    {{field.errors}}
                                                </div>
                                            </div>
                                        {% endfor %}

                                        <button class="btn btn-info btn-block"  id="btnim" type="submit" class="button">Salvar</button>

                                    </fieldset>
                                </form>

                            </div>

                        </div>

                        <script>
                            $(function () {
                                $('.datetime-input').datetimepicker({
                                    format:'YYYY-MM-DD',
                                })
                            });
                        </script>

                    </div>
                    <!-- <div class="modal-footer">
                        <button class="btn btn-info btn-block"  id="btnim" type="submit" class="button">Salvar</button>
                        <button type="button" class="btn btn-block" data-dismiss="modal">Cancelar</button>
                    </div> -->
                </div>
                
                </div>
            </div>
            
        </div><!--Fim Modal-->

        <!-- Modal Sucess -->
        <div id="myModalsucess" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- inserindo modal 27/07/2018 -->
                <div class="modal-content">
                    <div class="modal-body">

                        <div class="sucess">
                            <h3>Salvo com Sucesso!</h3>  
                        </div>

                        <div class="circle"></div>
                        
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Error -->
        <div id="myModalError" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <!-- inserindo modal 27/07/2018 -->
                    <div class="modal-content">
                        <div class="modal-body">
    
                            <div class="sucess">
                                <h3>Já está agendado para data atual!</h3> 
                            </div>
    
                            <div class="circle"></div>
                            
                        </div>
                    </div>
                </div>
            </div>
    

        {% if form_error %}
            <script>
                // Já está agendado para data atual!!
                $('#myModalError').modal('show');
                    setTimeout(function(){
                        $('#myModalError').modal('hide');
                        $("#myModal").modal("show");
                    }, 2000); 
                
            </script>              
        {% endif %}

        {% if form_sucess %}
            <script>            
                // alert("Salvo com Sucesso!");
                $('#myModalsucess').modal('show');
                    setTimeout(function(){
                        $('#myModalsucess').modal('hide');
                        window.location.href = "/";
                    }, 2000);            
            </script> 
        {% endif %}

        

        <div id="overlay">
            <div>
                
                <p> Ops já temos um agendamento com essa data </p>
                
                Clique aqui para [<a href='#' onclick='overlay()'> fechar </a>]
            </div>
        </div><!--Fim overlay-->

        <script>
            function overlay(){
                el = document.getElementById("overlay");
                el.style.visibility = (el.style.visibility == "visible")? "hidden":"visible"
            }
        </script>

        

    </body>
    {% endblock %}
